{"version":3,"sources":["services/firebase.js","components/Header.js","components/Footer.js","pages/Home.js","pages/Chat.js","helpers/auth.js","pages/Signup.js","pages/Login.js","services/firestore.js","pages/Room.js","components/OwnerPLayer/OwnerPLayer.js","components/SnakeModal/SnakeModal.js","components/PlayBox/PlayBox.js","pages/GamePlay.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","db","database","firestore","Header","react_default","a","createElement","className","react_router_dom","to","src","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","id","currentUser","href","onClick","signOut","Footer","target","HomePage","components_Header","components_Footer","Component","Chat","props","_this","Object","classCallCheck","this","_super","call","state","user","chats","content","readError","writeError","loadingChats","handleChange","bind","assertThisInitialized","handleSubmit","myRef","React","createRef","setState","chatArea","current","ref","on","snapshot","forEach","snap","push","val","sort","b","timestamp","_this2","scrollBy","scrollHeight","error","message","event","value","preventDefault","Date","now","uid","_context2","t0","d","concat","getDate","getMonth","getFullYear","getHours","getMinutes","_this3","role","map","chat","key","formatTime","onSubmit","name","onChange","email","signup","password","createUserWithEmailAndPassword","then","console","log","updateProfile","displayName","signInWithGoogle","provider","GoogleAuthProvider","signInWithPopup","SignUp","googleSignIn","[object Object]","length","_context","code","autoComplete","placeholder","Login","signInWithEmailAndPassword","undefined","history","location","localStorage","setItem","collection","services_firestore","doc","get","tutorial","add","update","delete","RoomPage","onDataChange","onChangeName","removeRoom","rooms","unsubscribe","RoomService","getAll","orderBy","onSnapshot","items","item","data","users","e","roomId","roomName","focus","charAt","scores","create","submitted","catch","_this$state2","input","room","i","_Object$keys$length","keys","window","confirm","OwnerPLayer","_this$props","userStyle","width","height","lineHeight","backgroundColor","color","style","disabled","connect","SnakeModal","status","setTimeout","result","element","isOwner","PlayBox","handleMinus","handlePlus","GamePlay","match","params","roomid","isLoading","bets","scoresChange","gameCount","shake","getData","getRoomDetal","onBetChange","showSnakeModal","onResetGame","renderPlayBox","_this$state","randomItem","reduce","object","userId","coin","count","countValue","getById","game","set","max","rand","Math","floor","random","arrItems","itemToCheck","removeItem","_this$state3","avatar","renderphotoURL","_this$state4","_this$state5","off","_this$state6","_this3$state","onRenderColor","md5","refId","Number","replace","toString","substring","_this$state7","newData","components_OwnerPLayer_OwnerPLayer","isActive","components_PlayBox_PlayBox","_this4","_this$state8","components_SnakeModal_SnakeModal","PrivateRoute","_ref","component","authenticated","rest","objectWithoutProperties","react_router","assign","basename","process","render","pathname","from","PublicRoute","_ref2","_localStorage$getItem","getItem","App","loading","onAuthStateChanged","exact","path","Home","Room","Signup","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","document","getElementById","Error","es","src_App"],"mappings":"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","file":"static/js/main.3fb560d4.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport 'firebase/firestore';\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\n\nconst config = {\n    apiKey: \"AIzaSyDhAlJ2kH_ilvTb6FMrnnuRCDCw1MMP7dI\",\n    authDomain: \"test-baucuatomca.firebaseapp.com\",\n    databaseURL: \"https://test-baucuatomca-default-rtdb.firebaseio.com\",\n    projectId: \"test-baucuatomca\",\n    storageBucket: \"test-baucuatomca.appspot.com\",\n    messagingSenderId: \"195498228780\",\n    appId: \"1:195498228780:web:ee787e920bac5fe2786589\",\n    measurementId: \"G-LWKL028W31\"\n};\n\nfirebase.initializeApp(config);\n\nexport const auth = firebase.auth;\nexport const db = firebase.database();\nexport const firestore = firebase.firestore();","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { auth } from '../services/firebase';\n\nfunction Header() {\n  return (\n    <header>\n      <nav className=\"navbar navbar-expand-sm fixed-top navbar-light bg-light\">\n        <Link className=\"navbar-brand\" to=\"/\">\n          <img src=\"/baucuatomca/img/icon.jfif\"/>\n        </Link>\n        <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNavAltMarkup\" aria-controls=\"navbarNavAltMarkup\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n          <span className=\"navbar-toggler-icon\"></span>\n        </button>\n        <div className=\"collapse navbar-collapse justify-content-end\" id=\"navbarNavAltMarkup\">\n          {auth().currentUser\n            ? <div className=\"navbar-nav\">\n              <Link className=\"nav-item nav-link mr-3\" to=\"/room\">Phòng chơi</Link>\n              <a href=\"/\" className=\"nav-item nav-link mr-3\" onClick={() => auth().signOut()}>Đăng xuất</a>\n            </div>\n            : <div className=\"navbar-nav\">\n              <Link className=\"nav-item nav-link mr-3\" to=\"/login\">Đăng nhập</Link>\n              <Link className=\"nav-item nav-link mr-3\" to=\"/signup\">Đăng ký</Link>\n            </div>}\n        </div>\n      </nav>\n    </header>\n  );\n}\n\nexport default Header;","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer>\n      <div className=\"container text-center\">\n        <p><a href=\"http://ledinhhai.github.io/\" target=\"\">ledinhhai.github.io</a>&copy;2021.</p>\n      </div>\n    </footer>\n  )\n}\n\nexport default Footer;","import React, { Component } from 'react';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport { Link } from 'react-router-dom';\n\nexport default class HomePage extends Component {\n  render() {\n    return (\n      <div className=\"home\">\n        <Header></Header>\n        <section>\n          <div className=\"jumbotron jumbotron-fluid py-5\">\n            <div className=\"container text-center py-5\">\n              <h1 className=\"display-4\">GAME BẦU CUA</h1>\n              <div className=\"mt-4\">\n                <Link className=\"btn btn-primary px-5 mr-3\" to=\"/room\">Chơi ngay</Link>\n              </div>\n            </div>\n          </div>\n        </section>\n        <Footer></Footer>\n      </div>\n    )\n  }\n}\n","import React, { Component } from \"react\";\nimport Header from \"../components/Header\";\nimport { auth } from \"../services/firebase\";\nimport { db } from \"../services/firebase\";\n\nexport default class Chat extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: auth().currentUser,\n      chats: [],\n      content: '',\n      readError: null,\n      writeError: null,\n      loadingChats: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.myRef = React.createRef();\n  }\n\n  async componentDidMount() {\n    this.setState({ readError: null, loadingChats: true });\n    const chatArea = this.myRef.current;\n    try {\n      db.ref(\"chats\").on(\"value\", snapshot => {\n        let chats = [];\n        snapshot.forEach((snap) => {\n          chats.push(snap.val());\n        });\n        chats.sort(function (a, b) { return a.timestamp - b.timestamp })\n        this.setState({ chats });\n        chatArea.scrollBy(0, chatArea.scrollHeight);\n        this.setState({ loadingChats: false });\n      });\n    } catch (error) {\n      this.setState({ readError: error.message, loadingChats: false });\n    }\n  }\n\n  handleChange(event) {\n    this.setState({\n      content: event.target.value\n    });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    this.setState({ writeError: null });\n    const chatArea = this.myRef.current;\n    try {\n      await db.ref(\"chats\").push({\n        content: this.state.content,\n        timestamp: Date.now(),\n        uid: this.state.user.uid\n      });\n      this.setState({ content: '' });\n      chatArea.scrollBy(0, chatArea.scrollHeight);\n    } catch (error) {\n      this.setState({ writeError: error.message });\n    }\n  }\n\n  formatTime(timestamp) {\n    const d = new Date(timestamp);\n    const time = `${d.getDate()}/${(d.getMonth()+1)}/${d.getFullYear()} ${d.getHours()}:${d.getMinutes()}`;\n    return time;\n  }\n\n  render() {\n    return (\n      <div>\n        <Header />\n\n        <div className=\"chat-area\" ref={this.myRef}>\n          {/* loading indicator */}\n          {this.state.loadingChats ? <div className=\"spinner-border text-success\" role=\"status\">\n            <span className=\"sr-only\">Loading...</span>\n          </div> : \"\"}\n          {/* chat area */}\n          {this.state.chats.map(chat => {\n            return <p key={chat.timestamp} className={\"chat-bubble \" + (this.state.user.uid === chat.uid ? \"current-user\" : \"\")}>\n              {chat.content}\n              <br />\n              <span className=\"chat-time float-right\">{this.formatTime(chat.timestamp)}</span>\n            </p>\n          })}\n        </div>\n        <form onSubmit={this.handleSubmit} className=\"mx-3\">\n          <textarea className=\"form-control\" name=\"content\" onChange={this.handleChange} value={this.state.content}></textarea>\n          {this.state.error ? <p className=\"text-danger\">{this.state.error}</p> : null}\n          <button type=\"submit\" className=\"btn btn-submit px-5 mt-4\">Send</button>\n        </form>\n        <div className=\"py-5 mx-3\">\n          Login in as: <strong className=\"text-info\">{this.state.user.email}</strong>\n        </div>\n      </div>\n    );\n  }\n}\n","import { auth } from \"../services/firebase\";\n\nexport function signup(email, password, name) {\n  return auth().createUserWithEmailAndPassword(email, password).then(user =>{\n    console.log(user);\n    auth().currentUser.updateProfile({\n      displayName: name\n    });\n  });\n}\n\nexport function signin(email, password) {\n  return auth().signInWithEmailAndPassword(email, password);\n}\n\nexport function signInWithGoogle() {\n  const provider = new auth.GoogleAuthProvider();\n  return auth().signInWithPopup(provider);\n}\n\nexport function signInWithGitHub() {\n  const provider = new auth.GithubAuthProvider();\n  return auth().signInWithPopup(provider);\n}\n\nexport function signInWithFB() {\n  const provider = new auth.FacebookAuthProvider();\n  return auth().signInWithPopup(provider);\n}\n\nexport function logout() {\n  return auth().signOut();\n}\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { signup, signInWithGoogle, signInWithGitHub } from \"../helpers/auth\";\n\nexport default class SignUp extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      error: null,\n      email: '',\n      password: '',\n      name:''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.googleSignIn = this.googleSignIn.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    this.setState({ error: '' });\n    if( this.state.name.length === 0){\n      this.setState({ error: \"Vui lòng chọn biệt danh\" });\n      return;\n    }\n    try {\n      await signup(this.state.email, this.state.password, this.state.name);\n    } catch (error) {\n      console.log(error);\n      if(error.code ===\"auth/email-already-in-use\"){\n        this.setState({ error: \"Email đã được sử dụng vui lòng sử dụng email khác\" });\n      }else if(error.code === \"auth/weak-password\"){\n        this.setState({ error: \"Mật khẩu phải có ít nhất 6 ký tự\" });\n      }else {\n        this.setState({ error: \"Đã có lỗi vui lòng liên hệ admin để hỗ trợ\" });\n      }\n      \n    }\n  }\n\n  async googleSignIn() {\n    try {\n      await signInWithGoogle();\n    } catch (error) {\n      this.setState({ error: error.message });\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <form\n          className=\"frmLogin\"\n          autoComplete=\"off\"\n          onSubmit={this.handleSubmit}\n        >\n          <h1 className=\"mb-5\">\n            Đăng ký tài khoản\n            {/* <Link className=\"title ml-2\" to=\"/\">\n              Chatty\n            </Link> */}\n          </h1>\n          <div className=\"form-group\">\n            <input className=\"form-control\" placeholder=\"Biệt danh\" name=\"name\" onChange={this.handleChange} value={this.state.name} type=\"text\"></input>\n          </div>\n          <div className=\"form-group\">\n            <input className=\"form-control\" placeholder=\"Email\" name=\"email\" type=\"email\" onChange={this.handleChange} value={this.state.email}></input>\n          </div>\n          <div className=\"form-group\">\n            <input className=\"form-control\" placeholder=\"Mật khẩu\" name=\"password\" onChange={this.handleChange} value={this.state.password} type=\"password\"></input>\n          </div>\n          <div className=\"form-group\">\n            {this.state.error ? <p className=\"text-danger\">{this.state.error}</p> : null}\n            <button className=\"btn btn-primary px-5\" type=\"submit\">Đăng ký</button>\n            <p className=\"line\"><span>Hoặc</span></p>\n            <button className=\"btn btn-danger\" type=\"button\" onClick={this.googleSignIn}>\n              Đăng ký bằng Google\n          </button>\n          </div>\n          <p>Nếu bạn đã có tài khoản? <Link to=\"/login\">Đăng nhập</Link></p>\n        </form>\n      </div>\n    )\n  }\n}\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { signin, signInWithGoogle, signInWithGitHub } from \"../helpers/auth\";\n\nexport default class Login extends Component {\n  constructor() {\n    super();\n    this.state = {\n      error: null,\n      email: \"\",\n      password: \"\"\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.googleSignIn = this.googleSignIn.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    this.setState({ error: \"\" });\n    try {\n      await signin(this.state.email, this.state.password);\n    } catch (error) {\n      this.setState({ error: error.message });\n    }\n  }\n\n  async googleSignIn() {\n    try {\n      await signInWithGoogle();\n    } catch (error) {\n      this.setState({ error: error.message });\n    }\n  }\n  componentDidMount(){\n    if(this.props.history.location.state != undefined){\n      localStorage.setItem(\"Redirect\", this.props.history.location.state[\"from\"][\"pathname\"])\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <form\n          className=\"frmLogin\"\n          autoComplete=\"off\"\n          onSubmit={this.handleSubmit}\n        >\n          <h1 className=\"mb-5\">\n            Đăng nhập\n            {/* <Link className=\"title ml-2\" to=\"/\">\n              Chatty\n            </Link> */}\n          </h1>\n          <div className=\"form-group\">\n            <input\n              className=\"form-control\"\n              placeholder=\"Email\"\n              name=\"email\"\n              type=\"email\"\n              onChange={this.handleChange}\n              value={this.state.email}\n            />\n          </div>\n          <div className=\"form-group\">\n            <input\n              className=\"form-control\"\n              placeholder=\"Mật khẩu\"\n              name=\"password\"\n              onChange={this.handleChange}\n              value={this.state.password}\n              type=\"password\"\n            />\n          </div>\n          <div className=\"form-group\">\n            {this.state.error ? (\n              <p className=\"text-danger\">{this.state.error}</p>\n            ) : null}\n            <button className=\"btn btn-primary px-5\" type=\"submit\">Đăng nhập</button>\n            <p className=\"line\"><span>Hoặc</span></p>\n            <button className=\"btn btn-danger\" type=\"button\" onClick={this.googleSignIn}>\n              Đăng nhập bằng Google\n          </button>\n          </div>\n          <hr /><p>\n            Nếu chưa có tài khoản? Bạn có thể <Link to=\"/signup\">Đăng ký</Link>\n          </p>\n        </form>\n\n      </div>\n    );\n  }\n}\n","import { firestore } from './firebase';\r\n\r\nconst db = firestore.collection(\"/rooms\");\r\n\r\nclass RoomService {\r\n    getAll() {\r\n      return db;\r\n    }\r\n\r\n    getById(id){\r\n        return db.doc(id).get();\r\n    }\r\n  \r\n    create(tutorial) {\r\n      return db.add(tutorial);\r\n    }\r\n  \r\n    update(id, value) {\r\n      return db.doc(id).update(value);\r\n    }\r\n  \r\n    delete(id) {\r\n      return db.doc(id).delete();\r\n    }\r\n  }\r\n  \r\nexport default new RoomService();\r\n\r\n","import React, { Component } from 'react';\r\nimport Header from '../components/Header';\r\nimport Footer from '../components/Footer';\r\nimport { Link } from 'react-router-dom';\r\nimport { auth } from \"../services/firebase\";\r\nimport RoomService from \"../services/firestore\";\r\n\r\nexport default class RoomPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onDataChange = this.onDataChange.bind(this);\r\n    this.onChangeName = this.onChangeName.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.removeRoom = this.removeRoom.bind(this);\r\n\r\n    this.state = {\r\n      rooms: [],\r\n      user: auth().currentUser,\r\n      name: \"\"\r\n    };\r\n\r\n    this.unsubscribe = undefined;\r\n\r\n  }\r\n  componentDidMount() {\r\n    this.unsubscribe = RoomService.getAll().orderBy(\"name\", \"asc\").onSnapshot(this.onDataChange);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.unsubscribe();\r\n  }\r\n\r\n  onDataChange(items) {\r\n    let rooms = [];\r\n    const uid = this.state.user.uid;\r\n    items.forEach((item) => {\r\n      let id = item.id;\r\n      let data = item.data();\r\n      if (data && (data.uid === uid || data.users[uid])) {\r\n        rooms.push({\r\n          id: id,\r\n          uid: data.uid,\r\n          name: data.name,\r\n          users: data.users\r\n        });\r\n      }\r\n\r\n    });\r\n\r\n    this.setState({\r\n      rooms: rooms,\r\n    });\r\n  }\r\n  onChangeName(e) {\r\n    this.setState({\r\n      name: e.target.value,\r\n    });\r\n  }\r\n  removeRoom(roomId) {\r\n    RoomService.delete(roomId);\r\n  }\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n    var { name, user } = this.state;\r\n    if (name.length === 0) {\r\n      this.roomName.focus();\r\n      return;\r\n    }\r\n    let data = {\r\n      uid: user.uid,\r\n      name: name,\r\n      users: {}\r\n    };\r\n    data.users[`${user.displayName.charAt(0)}${user.uid}`] = {\r\n      name: user.displayName,\r\n      scores: 0\r\n    };\r\n\r\n    RoomService.create(data)\r\n      .then(() => {\r\n        this.setState({\r\n          submitted: true,\r\n        });\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n      });\r\n  }\r\n  render() {\r\n    const { rooms, name, user } = this.state;\r\n    const removeRoom = this.removeRoom;\r\n    return (\r\n      <div className=\"home\">\r\n        <Header></Header>\r\n        <section className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-12\">\r\n              <h1 className=\"float-left\">Danh sách phòng</h1>\r\n              <form onSubmit={this.handleSubmit} className=\"form-inline float-right\">\r\n                <input className=\"form-control\"\r\n                  ref={(input) => { this.roomName = input; }}\r\n                  placeholder=\"Nhập tên phòng\" value={name} onChange={this.onChangeName} />\r\n                <button type=\"submit\" className=\"btn btn-primary ml-5\">Tạo phòng mới</button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n          <ul className=\"list-group mt-5 mb-5 list-room\">\r\n            {rooms.map(function (room, i) {\r\n              return <li key={i} className=\"list-group-item\">\r\n                <Link className=\"\" to={`/game/${room.id}`}>\r\n                  {room.name.length > 0 ? room.name : \"Chưa đặt tên\"}\r\n                </Link>\r\n                <span className=\"small ml-5\">{Object.keys(room.users).length ?? 0} người chơi</span>\r\n                <span className=\"ml-5\">Điểm số: {room.users[user.uid]}</span>\r\n                {\r\n                  room.uid === user.uid ?\r\n                    <button className=\"btn btn-danger float-right\"\r\n                      onClick={() => { if (window.confirm('Delete the item?')) { removeRoom(room.id) }; }}>\r\n                      <i className=\"fa fa-trash  \"></i></button> : \"\"\r\n                }\r\n              </li>;\r\n            })}\r\n          </ul>\r\n        </section>\r\n        <Footer></Footer>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport '../PlayBox/Playbox.scss';\r\n\r\nclass OwnerPLayer extends Component{\r\n  render() {\r\n    const {value, users, name} = this.props;\r\n    return (\r\n      <div className={`playBox col-xs-12 col-sm-4`}>\r\n          <div className={`playItem ${name}`}></div>\r\n          {users?users.map(item =>{\r\n            var userStyle ={\r\n              width: item.value,\r\n              height: item.value,\r\n              lineHeight: (item.value > 150 ? 150 : item.value)+\"px\",\r\n              backgroundColor: item.color\r\n            }\r\n            return <div key={item.uid} className=\"userSelect\" style={userStyle}>\r\n              {item.uid.charAt(0)}\r\n            </div>\r\n          }):\"\"}\r\n          <div className =\"boxControl\">\r\n          {/* <button type=\"button\"><i className=\"fa fa-minus\"></i></button> */}\r\n          <input disabled value={value}/>\r\n          {/* <button type=\"button\"><i className=\"fa fa-plus\"></i></button> */}\r\n          </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect()(OwnerPLayer);\r\n","import React from 'react';\r\nimport \"./SnakeModal.scss\"\r\n\r\nclass SnakeModal extends React.Component {\r\n    state = {\r\n        className: \"open\"\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.status === 1) {\r\n            setTimeout(\r\n                () => this.setState({ className: \"closing\" }),\r\n                1000\r\n            );\r\n            setTimeout(\r\n                () => this.setState({ className: \"closing in\" }),\r\n                3000\r\n            );\r\n        }\r\n    }\r\n    componentDidUpdate () {\r\n        if( this.props.status === 2 ){\r\n            setTimeout(\r\n                () => this.setState({ className: \"open\" }),\r\n                1000\r\n            );\r\n        }\r\n    }\r\n    render() {\r\n        const { result, onClick} = this.props;\r\n        return <div className=\"snakeModal\">\r\n            <div className={`boder ${this.state.className}`}>\r\n            <div className=\"groupItem\">\r\n                {result.map((element, i) => {\r\n                   return<div key={i} className={`item ${element.name}`}></div>\r\n                })}\r\n                  </div>\r\n                 {/* {this.props.status === 2?\r\n                    <button onClick= {onResetGame}>Game mới</button>:\"\"\r\n                 }  */}\r\n                <div className=\"cover\">\r\n                    {this.props.isOwner ?\r\n                        <button onClick={onClick} className=\"btnOpen\" >Mở</button> : \"\"}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\n\r\nexport default SnakeModal","// @flow\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport type { Dispatch } from '../../types';\r\n\r\nimport './Playbox.scss';\r\n\r\nexport type Props = {\r\n  style: Object,\r\n  dispatch: Dispatch\r\n};\r\n\r\nexport type State = {\r\n  value: Number\r\n};\r\n\r\nclass PlayBox extends Component<Props, State> {\r\n \r\n  handleMinus = (event: Event) => {\r\n    event.preventDefault();\r\n    \r\n    let value = this.props.value - 10;\r\n    this.props.onClick(this.props.name, value);\r\n  };\r\n\r\n  handlePlus = (event: Event) => {\r\n    event.preventDefault();\r\n    let value = this.props.value + 10;\r\n    this.props.onClick(this.props.name, value);\r\n  };\r\n \r\n  render() {\r\n    const {value, users, name} = this.props;\r\n    return (\r\n      <div className={`playBox col-xs-12 col-sm-4`}>\r\n          <div className={`playItem ${name}`}></div>\r\n          {users?users.map(item =>{\r\n            var userStyle ={\r\n              width: item.value,\r\n              height: item.value,\r\n              lineHeight: (item.value > 150 ? 150 : item.value)+\"px\",\r\n              backgroundColor: item.color\r\n            }\r\n            return <div key={item.uid} className=\"userSelect\" style={userStyle}>\r\n              {item.name}\r\n            </div>\r\n          }):\"\"}\r\n          <div className =\"boxControl\">\r\n          <button onClick={this.handleMinus}><i className=\"fa fa-minus\"></i></button>\r\n          <input disabled value={value}/>\r\n          <button onClick={this.handlePlus}><i className=\"fa fa-plus\"></i></button>\r\n          </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect()(PlayBox);\r\n","import React, { Component } from 'react';\r\nimport Header from '../components/Header';\r\nimport Footer from '../components/Footer';\r\nimport { auth, intMessaging as messaging } from \"../services/firebase\";\r\nimport RoomService from \"../services/firestore\";\r\nimport OwnerPLayer from \"../components/OwnerPLayer/OwnerPLayer\";\r\nimport SnakeModal from \"../components/SnakeModal/SnakeModal\";\r\nimport PlayBox from \"../components/PlayBox/PlayBox\";\r\n\r\nimport md5 from 'md5';\r\n\r\nimport { db } from '../services/firebase';\r\n\r\n\r\nexport default class GamePlay extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isOwner: false,\r\n      user: auth().currentUser,\r\n      roomId: props.match.params.roomid,\r\n      isLoading: true,\r\n      items: [\r\n        {\r\n          name: \"Nai\",\r\n          value: 0\r\n        },\r\n        {\r\n          name: \"Bau\",\r\n          value: 0\r\n        },\r\n        {\r\n          name: \"Ga\",\r\n          value: 0\r\n        },\r\n        {\r\n          name: \"Ca\",\r\n          value: 0\r\n        },\r\n        {\r\n          name: \"Cua\",\r\n          value: 0\r\n        },\r\n        {\r\n          name: \"Tom\",\r\n          value: 0\r\n        }\r\n      ],\r\n      result: [\r\n        {\r\n          name: \"Bau\",\r\n          value: 0\r\n        },\r\n        {\r\n          name: \"Bau\",\r\n          value: 0\r\n        },\r\n        {\r\n          name: \"Bau\",\r\n          value: 0\r\n        }\r\n      ],\r\n      bets: {},\r\n      status: 0,\r\n      scores: 0,\r\n      scoresChange: 0,\r\n      gameCount: 0,\r\n      chats: []\r\n    };\r\n    this.shake = this.shake.bind(this);\r\n    this.getData = this.getData.bind(this);\r\n    this.getRoomDetal = this.getRoomDetal.bind(this);\r\n    this.onBetChange = this.onBetChange.bind(this);\r\n    this.showSnakeModal = this.showSnakeModal.bind(this);\r\n    this.onResetGame = this.onResetGame.bind(this);\r\n    this.renderPlayBox = this.renderPlayBox.bind(this);\r\n\r\n    this.unsubscribe = undefined;\r\n  }\r\n\r\n  shake() {\r\n    var { roomId, bets, user, result } = this.state;\r\n    var scores = {};\r\n    result = [this.randomItem(), this.randomItem(), this.randomItem()];\r\n\r\n    Object.keys(bets).reduce((object, userId) => {\r\n      const item = bets[userId];\r\n      var coin = 0;\r\n      Object.keys(item).reduce((object, key) => { // key is Bau Cua Tom Ca...\r\n        var count = this.countValue(result, key);\r\n        if (count > 0) {\r\n          coin += count * item[key];\r\n        } else {\r\n          coin -= item[key];\r\n        }\r\n        return object;\r\n      }, {});\r\n      scores[userId] = coin;\r\n      return object;\r\n    }, {});\r\n    \r\n    RoomService.getById(roomId).then(data => {\r\n      var room = data.data();\r\n      var key =`${user.displayName.charAt(0)}${user.uid}`;\r\n      scores[key] = 0; // reset diem chu phong\r\n      Object.keys(scores).reduce((object, userId) => {\r\n        if (userId !== key) {// không phải là chủ phòng\r\n          scores[key] -= scores[userId]; // điểm của chủ phòng bằng hiện tại trừ cho điểm player \r\n          room.users[userId][\"scores\"] += scores[userId]; // Update điểm của player \r\n        }\r\n        return object;\r\n      }, {});\r\n      room.users[key][\"scores\"] += scores[key];\r\n      RoomService.update(roomId, room);\r\n    });\r\n\r\n    db.ref(roomId).update({\r\n      status: 2,\r\n      bets: {},\r\n      result: result\r\n    });\r\n    setTimeout(\r\n      () => this.onResetGame(),\r\n      5000\r\n    );\r\n  }\r\n\r\n  onResetGame() {\r\n    var { roomId, gameCount, result } = this.state;\r\n    db.ref(roomId).update({\r\n      status: 0,\r\n      game: gameCount + 1\r\n    });\r\n    db.ref(roomId + \"/list/\" + roomId + gameCount).set({\r\n      content: `Game ${(gameCount + 1)}: ${result.map(item => item.name)} `,\r\n      timestamp: Date.now()\r\n    });\r\n  }\r\n\r\n  randomItem() {\r\n    const min = 0;\r\n    const max = this.state.items.length;\r\n    const rand = Math.floor(Math.random() * max) + min;\r\n    return this.state.items[rand];\r\n  }\r\n\r\n  countValue(arrItems, itemToCheck) {\r\n    var result = 0;\r\n    arrItems.map(item => item.name === itemToCheck ? result += 1 : result);\r\n    return result;\r\n  }\r\n\r\n  componentDidMount() {\r\n    localStorage.removeItem(\"Redirect\");\r\n    const { roomId, user } = this.state;\r\n    db.ref(roomId + \"/list/\" + user.uid).set({\r\n      content: user.displayName + \" đã vào phòng\",\r\n      timestamp: Date.now(),\r\n      name: user.displayName,\r\n      avatar: this.renderphotoURL(user.email),\r\n      uid: user.uid\r\n    });\r\n    this.unsubscribe = RoomService.getAll().doc(roomId).onSnapshot(this.getRoomDetal);\r\n    this.getData();\r\n  }\r\n\r\n  getRoomDetal(data) {\r\n      var { scoresChange, scores, user, roomId } = this.state;\r\n      var room = data.data();\r\n      if (room === undefined) {\r\n        return this.props.history.push('/');\r\n      }\r\n      var key =`${user.displayName.charAt(0)}${user.uid}`;\r\n      // lần đầu vào room\r\n      if (room.users[key] === undefined) {\r\n        room.users[key] = {\r\n          name: user.displayName,\r\n          scores: 0\r\n        }; // cập nhập danh sách user của room\r\n        RoomService.update(roomId, room);\r\n      }\r\n      scoresChange = room.users[key].scores - scores;\r\n      this.setState({\r\n        scores: room.users[key].scores,\r\n        scoresChange: scoresChange,\r\n        isOwner: room.uid === user.uid,\r\n        users: room.users\r\n      });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { roomId, user } = this.state;\r\n    db.ref(roomId + \"/list/\" + user.uid).set({\r\n      content: user.displayName + \" đã thoát khỏi phòng\",\r\n      timestamp: Date.now(),\r\n      name: user.displayName,\r\n      avatar: this.renderphotoURL(user.email),\r\n      uid: user.uid\r\n    });\r\n    this.unsubscribe();\r\n    db.ref(roomId).off();\r\n  }\r\n\r\n  getData() {\r\n    var { roomId, status, result, bets, chats, gameCount } = this.state;\r\n    db.ref(roomId).on(\"value\", snapshot => {\r\n      bets = {};\r\n      snapshot.forEach(snap => {\r\n        if (snap.key === \"game\") {\r\n          gameCount = snap.val() || 0;\r\n        } else if (snap.key === \"bets\") {\r\n          bets = snap.val();\r\n        } else if (snap.key === \"status\") {\r\n          status = snap.val();\r\n        } else if (snap.key === \"result\") {\r\n          result = snap.val();\r\n        } else if (snap.key === \"list\") {\r\n          var data = snap.val();\r\n          chats = [];\r\n          Object.keys(data).map(key => {\r\n            data[key] && chats.push(data[key]);\r\n          })\r\n        }\r\n      });\r\n      var { items, user, isOwner } = this.state;\r\n      items.forEach((item, key) => {\r\n        var users = [];\r\n        item.value = 0;\r\n        item.users = users;\r\n        Object.keys(bets).reduce((object, key) => {\r\n          if (bets[key][item.name] !== undefined) {\r\n            users.push({\r\n              uid: key,\r\n              name: key.charAt(0),\r\n              value: bets[key][item.name] || 0,\r\n              color: this.onRenderColor(key)\r\n            });\r\n          };\r\n\r\n          if (isOwner) {\r\n            item.value += bets[key][item.name] || 0;\r\n          } else if (key === `${user.displayName.charAt(0)}${user.uid}`) {\r\n            item.value = bets[key][item.name] || 0;\r\n          }\r\n          return object;\r\n        }, {});\r\n      });\r\n      this.setState({\r\n        bets: bets,\r\n        gameCount: gameCount,\r\n        items: items,\r\n        result: result,\r\n        status: status,\r\n        isLoading: false,\r\n        chats: chats.sort((a, b) => a.timestamp < b.timestamp ? -1 : 1)\r\n      });\r\n    });\r\n  }\r\n  componentDidUpdate() {\r\n    this.chatArea && this.chatArea.scrollBy(0, this.chatArea.scrollHeight);\r\n  }\r\n\r\n  renderphotoURL(email) {\r\n    return \"http://www.gravatar.com/avatar/\" + md5(email) + \".jpg?s=300\";\r\n  }\r\n\r\n  showSnakeModal() {\r\n    const refId = this.state.roomId;\r\n    db.ref(refId).update({\r\n      status: 1\r\n    });\r\n  }\r\n\r\n  onRenderColor(key) {\r\n    var number = Number(key.replace(/\\D/g, '')) + 11111111;\r\n    return \"#\" + (number.toString(16).substring(0, 6));\r\n  }\r\n\r\n  formatTime(timestamp) {\r\n    const d = new Date(timestamp);\r\n    const time = `${d.getDate()}/${(d.getMonth() + 1)}/${d.getFullYear()} ${d.getHours()}:${d.getMinutes()}}`;\r\n    return time;\r\n  }\r\n  onBetChange(name, value) {\r\n    const { roomId, user, bets, gameCount } = this.state;\r\n    var data = bets[`${user.displayName.charAt(0)}${user.uid}`] || [];\r\n    console.log(data);\r\n    data[name] = value;\r\n    const newData = Object.keys(data).reduce((object, key) => {\r\n      if (data[key] > 0) {\r\n        object[key] = data[key];\r\n      }\r\n      return object\r\n    }, {});\r\n    console.log(bets);\r\n    db.ref(`${roomId}/list/${user.uid}${gameCount}`).set({\r\n      avatar: this.renderphotoURL(user.email),\r\n      content: `${user.displayName} đã đặt cược ${Object.keys(newData).map(key => key)}`,\r\n      timestamp: Date.now(),\r\n      uid: user.uid\r\n    });\r\n    db.ref(`${roomId}/bets/${user.displayName.charAt(0)}${user.uid}`).set(newData);\r\n  }\r\n\r\n  renderPlayBox(items) {\r\n    if (this.state.isOwner) {\r\n      return items.map(function (item, i) {\r\n        return <OwnerPLayer key={i} name={item.name} value={item.value}\r\n          style={item.style} isActive={item.isActive}\r\n          users={item.users}\r\n        />\r\n      });\r\n    } else {\r\n      const onClick = this.onBetChange;\r\n      return items.map(function (item, i) {\r\n        return <PlayBox key={i} name={item.name} value={item.value}\r\n          style={item.style} isActive={item.isActive}\r\n          users={item.users}\r\n          onClick={onClick}\r\n        />\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { isLoading, status, isOwner, result, items, scores, scoresChange, bets, chats, users, user } = this.state;\r\n    if (isLoading) {\r\n      return <div>Is Loading</div>\r\n    }\r\n    return (\r\n      <div className=\"home\">\r\n        <Header></Header>\r\n        <section>\r\n          <div className=\"jumbotron jumbotron-fluid py-5\">\r\n            <div className=\"container-fluid\">\r\n              <div className=\"row\">\r\n                <div className=\"col-sm-10\">\r\n                  {this.renderPlayBox(items)}\r\n                </div>\r\n                <div className=\"col-sm-2\">\r\n                  <div className=\"chat-area\" ref={(input) => { this.chatArea = input; }} >\r\n                    {chats.map(chat => {\r\n                      return <p key={chat.timestamp} className={\"chat-bubble \" + (this.state.user.uid === chat.uid ? \"current-user\" : \"\")}>\r\n                        {chat.content}\r\n                      </p>\r\n                    })}\r\n                  </div>\r\n                  {isOwner && Object.keys(bets).length > 0 ? <button className=\"btn btn-primary mt-5\" onClick={this.showSnakeModal}>Lắc</button> : \"\"}\r\n                  <p>Điểm số: {scores}</p>\r\n                  <ul>\r\n                    {isOwner && Object.keys(users).map(item =>{\r\n                      \r\n                      if(item !== `${user.displayName.charAt(0)}${user.uid}`){\r\n                        return <li key={item}>{users[item].name}: {users[item].scores}</li>\r\n                      }\r\n                    })}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <Footer></Footer>\r\n        {status !== 0 ? <SnakeModal isOwner={isOwner} onClick={this.shake}\r\n          onResetGame={this.onResetGame}\r\n          result={result} status={status}></SnakeModal> : \"\"}\r\n        {status === 2 ? <div className={`updateScore ${scoresChange < 0 ? \"error\" : scoresChange > 0 ? \"success\" : \"\"}`}>{scoresChange}</div> : \"\"}\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component } from \"react\";\nimport {\n  HashRouter,\n  Route,\n  BrowserRouter as Router,\n  Switch,\n  Redirect\n} from \"react-router-dom\";\nimport Home from \"./pages/Home\";\nimport Chat from \"./pages/Chat\";\nimport Signup from \"./pages/Signup\";\nimport Login from \"./pages/Login\";\nimport Room from \"./pages/Room\";\nimport GamePlay from \"./pages/GamePlay\";\nimport { auth } from \"./services/firebase\";\nimport './styles.css';\n\nfunction PrivateRoute({ component: Component, authenticated, ...rest }) {\n  return (\n    <Route\n    basename={process.env.PUBLIC_URL}\n      {...rest}\n      render={props =>\n        authenticated === true ? (\n          <Component {...props} />\n        ) : (\n            <Redirect\n              to={{ pathname: \"/login\", state: { from: props.location } }}\n            />\n          )\n      }\n    />\n  );\n}\n\nfunction PublicRoute({ component: Component, authenticated, ...rest }) {\n  return (\n    <Route\n      basename={process.env.PUBLIC_URL}\n      {...rest}\n      render={props =>\n        authenticated === false ? (\n          <Component {...props} />\n        ) : (\n          <Redirect to={props.location.state && props.location.state.from ? props.location.state.from.pathname:localStorage.getItem(\"Redirect\")??\"/baucuatomca/\"} />\n          )\n      }\n    />\n  );\n}\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      authenticated: false,\n      loading: true\n    };\n  }\n\n  componentDidMount() {\n    auth().onAuthStateChanged(user => {\n      if (user) {\n        this.setState({\n          authenticated: true,\n          loading: false\n        });\n      } else {\n        this.setState({\n          authenticated: false,\n          loading: false\n        });\n      }\n    });\n  }\n\n  render() {\n    return this.state.loading === true ? (\n      <div className=\"spinner-border text-success\" role=\"status\">\n        <span className=\"sr-only\">Loading...</span>\n      </div>\n    ) : (\n      <HashRouter basename={process.env.PUBLIC_URL}>\n          <Switch>\n            <Route exact path=\"/\" component={Home}  basename={process.env.PUBLIC_URL}/>\n            <PrivateRoute\n              path=\"/chat\"\n              authenticated={this.state.authenticated}\n              component={Chat}\n            />\n            <PrivateRoute\n              exact\n              path=\"/room\"\n              authenticated={this.state.authenticated}\n              component={Room}\n            />\n            <PrivateRoute\n              exact\n              path=\"/game/:roomid\"\n              authenticated={this.state.authenticated}\n              component={GamePlay}\n            />\n            <PublicRoute\n              path=\"/signup\"\n              authenticated={this.state.authenticated}\n              component={Signup}\n            />\n            <PublicRoute\n              path=\"/login\"\n              authenticated={this.state.authenticated}\n              component={Login}\n            />\n          </Switch>\n        </HashRouter>\n      );\n  }\n}\n\nexport default App;\n","import React from \"react\";\n\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore } from 'redux';\n\nimport App from \"./App\";\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'font-awesome/css/font-awesome.min.css';\n\n//import reducers from './reducers';\nfunction reducers() {\n    return {\n      count: 42\n    };\n}\n\n\nconst store = createStore(\n  reducers,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n\nconst element = document.getElementById('root');\nif (!element) {\n  throw new Error(\"couldn't find element with id root\")\n}\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  element\n);"],"sourceRoot":""}